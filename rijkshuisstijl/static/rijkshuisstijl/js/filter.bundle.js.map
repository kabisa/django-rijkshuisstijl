{"version":3,"sources":["webpack:///./rijkshuisstijl/js/components/filter/filter.js"],"names":["Filter","node","input","BEM","getChildBEMNode","BLOCK_FILTER","ELEMENT_INPUT","bindEvents","applyFilter","addEventListener","filter","bind","value","discardFilter","setTimeout","selection","document","querySelectorAll","dataset","filterTarget","query","toUpperCase","forEach","addModifier","MODIFIER_MATCH","removeModifier","MODIFIER_NO_MATCH","hasModifier","MODIFIER_CLASS_ONLY","style","removeProperty","textContent","match","display","FILTERS"],"mappings":";;;;;;;;;;;;;;;mnCAWA;;;;;GAMO,GAAMA,OAAb,yBACI;;;OAIA,gBAAYC,IAAZ,CAAkB,8BACd,0BACA,KAAKA,IAAL,CAAYA,IAAZ,CAEA,+BACA,KAAKC,KAAL,CAAaC,6CAAG,CAACC,eAAJ,CAAoB,KAAKH,IAAzB,CAA+BI,uDAA/B,CAA6CC,wDAA7C,CAAb,CAEA,KAAKC,UAAL,GACA,KAAKC,WAAL,GACH,CAED;;OAhBJ,kEAmBiB,CACT,KAAKP,IAAL,CAAUQ,gBAAV,CAA2B,OAA3B,CAAoC,KAAKC,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAApC,EACH,CAED;;OAvBJ,uCA0Ba,CACL,GAAI,KAAKT,KAAL,CAAWU,KAAf,CAAsB,CAClB,KAAKJ,WAAL,GACH,CAFD,IAEO,CACH,KAAKK,aAAL,GACH,CACJ,CAED;;OAlCJ,iDAqCkB,gBACVC,UAAU,CAAC,UAAM,CACb,GAAIC,UAAS,CAAGC,QAAQ,CAACC,gBAAT,CAA0B,KAAI,CAAChB,IAAL,CAAUiB,OAAV,CAAkBC,YAA5C,CAAhB,CACA,GAAIC,MAAK,CAAG,KAAI,CAAClB,KAAL,CAAWU,KAAX,CAAiBS,WAAjB,EAAZ,CAEA,mBAAIN,SAAJ,EAAeO,OAAf,CAAuB,SAAArB,IAAI,CAAI,CAC3BE,6CAAG,CAACoB,WAAJ,CAAgBtB,IAAhB,CAAsBuB,yDAAtB,EACArB,6CAAG,CAACsB,cAAJ,CAAmBxB,IAAnB,CAAyByB,4DAAzB,EAEA,GAAG,CAACvB,6CAAG,CAACwB,WAAJ,CAAgB,KAAI,CAAC1B,IAArB,CAA2B2B,8DAA3B,CAAJ,CAAqD,CACjD3B,IAAI,CAAC4B,KAAL,CAAWC,cAAX,CAA0B,SAA1B,EACH,CAED,GAAI,CAAC7B,IAAI,CAAC8B,WAAL,CAAiBV,WAAjB,GAA+BW,KAA/B,CAAqCZ,KAArC,CAAL,CAAkD,CAC9CjB,6CAAG,CAACsB,cAAJ,CAAmBxB,IAAnB,CAAyBuB,yDAAzB,EACArB,6CAAG,CAACoB,WAAJ,CAAgBtB,IAAhB,CAAsByB,4DAAtB,EAEA,GAAG,CAACvB,6CAAG,CAACwB,WAAJ,CAAgB,KAAI,CAAC1B,IAArB,CAA2B2B,8DAA3B,CAAJ,CAAqD,CACjD3B,IAAI,CAAC4B,KAAL,CAAWI,OAAX,CAAqB,MAArB,CACH,CACJ,CACJ,CAhBD,EAiBH,CArBS,CAAV,CAsBH,CAED;;OA9DJ,qDAiEoB,iBACZ,GAAIlB,UAAS,CAAGC,QAAQ,CAACC,gBAAT,CAA0B,KAAKhB,IAAL,CAAUiB,OAAV,CAAkBC,YAA5C,CAAhB,CACA,mBAAIJ,SAAJ,EAAeO,OAAf,CAAuB,SAAArB,IAAI,CAAI,CAC3B,GAAG,CAACE,6CAAG,CAACwB,WAAJ,CAAgB,MAAI,CAAC1B,IAArB,CAA2B2B,8DAA3B,CAAJ,CAAqD,CACjD3B,IAAI,CAAC4B,KAAL,CAAWC,cAAX,CAA0B,SAA1B,EACH,CACD3B,6CAAG,CAACsB,cAAJ,CAAmBxB,IAAnB,CAAyByB,4DAAzB,EACAvB,6CAAG,CAACoB,WAAJ,CAAgBtB,IAAhB,CAAsBuB,yDAAtB,EACH,CAND,EAOH,CA1EL,sBA8EA;AACA,mBAAIU,kDAAJ,EAAaZ,OAAb,CAAqB,SAAAZ,MAAM,QAAI,IAAIV,OAAJ,CAAWU,MAAX,CAAJ,EAA3B,E","file":"filter.bundle.js","sourcesContent":["import BEM from 'bem.js';\nimport {\n    BLOCK_FILTER,\n    ELEMENT_INPUT,\n    FILTERS,\n    MODIFIER_CLASS_ONLY,\n    MODIFIER_MATCH,\n    MODIFIER_NO_MATCH\n} from './constants';\n\n\n/**\n * Class for generic filters.\n * Filter should have MODIFIER_FILTER present in classList for detection.\n * Filter should have data-filter-target set to query selector for targets.\n * @class\n */\nexport class Filter {\n    /**\n     * Constructor method.\n     * @param {HTMLElement} node\n     */\n    constructor(node) {\n        /** @type {HTMLElement} */\n        this.node = node;\n\n        /** @type {HTMLInputElement} */\n        this.input = BEM.getChildBEMNode(this.node, BLOCK_FILTER, ELEMENT_INPUT);\n\n        this.bindEvents();\n        this.applyFilter();\n    }\n\n    /**\n     * Binds events to callbacks.\n     */\n    bindEvents() {\n        this.node.addEventListener('input', this.filter.bind(this));\n    }\n\n    /**\n     * Applies/discard the filter based on this.input.value.\n     */\n    filter() {\n        if (this.input.value) {\n            this.applyFilter();\n        } else {\n            this.discardFilter();\n        }\n    }\n\n    /**\n     * Hides all the nodes matching query selector set in data-filter-target that don't match this.input.value.\n     */\n    applyFilter() {\n        setTimeout(() => {\n            let selection = document.querySelectorAll(this.node.dataset.filterTarget);\n            let query = this.input.value.toUpperCase();\n\n            [...selection].forEach(node => {\n                BEM.addModifier(node, MODIFIER_MATCH);\n                BEM.removeModifier(node, MODIFIER_NO_MATCH);\n\n                if(!BEM.hasModifier(this.node, MODIFIER_CLASS_ONLY)) {\n                    node.style.removeProperty('display');\n                }\n\n                if (!node.textContent.toUpperCase().match(query)) {\n                    BEM.removeModifier(node, MODIFIER_MATCH);\n                    BEM.addModifier(node, MODIFIER_NO_MATCH);\n\n                    if(!BEM.hasModifier(this.node, MODIFIER_CLASS_ONLY)) {\n                        node.style.display = 'none';\n                    }\n                }\n            });\n        });\n    }\n\n    /**\n     * Removes display property from inline style of every node matching query selector set in data-filter-target.\n     */\n    discardFilter() {\n        let selection = document.querySelectorAll(this.node.dataset.filterTarget);\n        [...selection].forEach(node => {\n            if(!BEM.hasModifier(this.node, MODIFIER_CLASS_ONLY)) {\n                node.style.removeProperty('display');\n            }\n            BEM.removeModifier(node, MODIFIER_NO_MATCH);\n            BEM.addModifier(node, MODIFIER_MATCH);\n        });\n    }\n}\n\n\n// Start!\n[...FILTERS].forEach(filter => new Filter(filter));\n"],"sourceRoot":""}